<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Change Password</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .input-group-text {
        cursor: pointer;
      }
    </style>
  </head>

  <body class="bg-light">
    <div
      class="container d-flex justify-content-center align-items-center min-vh-100"
    >
      <div class="card shadow p-4" style="max-width: 500px; width: 100%">
        <h4 class="mb-4 text-center text-primary">
          Change Password for <%= userById.username %>
        </h4>

        <form
          method="POST"
          action="/api/v1/admin/users/<%= userById._id %>/change-password"
        >
          <div class="mb-3">
            <label for="currentPassword" class="form-label"
              >Current Password</label
            >
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="currentPassword"
                name="currentPassword"
                required
              />
              <span
                class="input-group-text"
                onclick="togglePassword('currentPassword', this)"
                >👁</span
              >
            </div>
          </div>

          <div class="mb-3">
            <label for="newPassword" class="form-label">New Password</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="newPassword"
                name="newPassword"
                required
              />
              <span
                class="input-group-text"
                onclick="togglePassword('newPassword', this)"
                >👁</span
              >
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-100">
            Change Password
          </button>
        </form>

        <a
          href="/api/v1/admin/users"
          class="btn btn-link mt-3 w-100 text-center"
          >← Back to Users</a
        >
      </div>
    </div>

    <script>
      function togglePassword(fieldId, el) {
        const input = document.getElementById(fieldId);
        if (input.type === 'password') {
          input.type = 'text';
          el.textContent = '🙈';
        } else {
          input.type = 'password';
          el.textContent = '👁';
        }
      }
    </script>
  </body>
</html>
